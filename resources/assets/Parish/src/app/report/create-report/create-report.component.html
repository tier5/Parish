<h3 class="page-header">{{ title }} <span *ngIf="createMode">( Pick a date to create report )</span></h3>


<div class="row">
    <div class="col-lg-12">
        <div *ngIf="!responseStatus && responseReceived" class="alert alert-danger">
            <strong>{{ responseMsg }}</strong>
        </div>
    </div>
    <div class="col-lg-12">
        <div *ngIf="responseStatus && responseReceived" class="alert alert-success">
            <strong>{{ responseMsg }}</strong>
            <!--<a [routerLink]="['/payment/upload']" *ngIf="showPrompt">Click Here To Make Payment</a>-->
            <a (click)="showPaymentuploadPrompt()">Click Here To Make Payment</a>
        </div>

    </div>
</div>

<form #prForm="ngForm">
    <div class="col-md-12">
        <div class="row row-eq-height">
            <div class="col-md-12 border-black">
                <div class="row">
                    <h4 class="text-center">
                        monthly progress report
                    </h4>
                    <div class="col-sm-12">
                        <p class="acc-id" *ngIf="parishShow">Parish Id :
                            <select *ngIf="parish_id"
                                    #parishidlist
                                    [disabled]="!viewMode"
                                    (change)="onParishIdChange(parishidlist.value)"
                                    [ngModel]="parish_id"
                                    name="parishIdDropDown"
                            >
                                <option [value]="parish.id" *ngFor="let parish of parishIdList">ROI{{ parish.id }}</option>

                            </select>
                        </p>
                        <p class="acc-id" *ngIf="!parishShow">Parish Id : ROI{{ parish_id }}</p>
                        <p class="acc-name">
                            Account Name :
                            <span>
                                {{ progress_report.account_name }}
                            </span>
                        </p>
                    </div>


                    <div class="acc-details">
                        <div class="col-sm-6">
                            <div class="block">
                                <label>Month: </label>
                                <span>{{ progress_report.month }}</span>
                            </div>
                            <div class="block">
                                <label>Parish Pastor: </label>
                                <span>{{ progress_report.parish_pastor }}</span>
                            </div>
                            <div class="block">
                                <label>Zonal Pastor: </label>
                                <span>{{ progress_report.zonal_pastor }}</span>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="block">
                                <label>Year: </label>
                                <span>{{ progress_report.year }}</span>
                            </div>
                            <div class="block">
                                <label>Area Pastor: </label>
                                <span>{{ progress_report.area_pastor }}</span>
                            </div>
                            <div class="block">
                                <label>Provincial Pastor: </label>
                                <span>{{ progress_report.province_pastor }}</span>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="block">
                                <label>Penalty Percentage: </label>
                                <span>{{ penalty_percent }}%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="row">
                    <div class="spacer"></div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="row">
                    <div class="table-responsive white-bg">
                        <table class="table table-bordered">
                            <tbody>
                            <tr>
                                <td colspan="14">
                                    <table class="table no-margin">
                                        <tbody>
                                        <tr>
                                            <td colspan="2">
                                                <span class="highlight">Progress Report For </span>
                                            </td>
                                            <td>

										        <span class="sea-green">
                                                    <dp-date-picker id="daytimePicker"
                                                                    name="daytimePicker"
                                                                    #datePicker
                                                                    #daytimePicker="ngModel"
                                                                    [(ngModel)]="progress_report.crucial_date"
                                                                    (ngModelChange)="log($event)"
                                                                    [mode]="'month'"
                                                                    [placeholder]="'Pick Month & Year'"
                                                                    [config]="config"
                                                                    [theme]="'dp-material'" [disabled]="editMode">
                                                    </dp-date-picker>
                                                    <select *ngIf="viewMode && reportIdList && displaymode"
                                                            [ngModel]="reportId"
                                                            name="reportIDList"
                                                            #reportNo
                                                            (change)="onReportChange(reportNo.value)"
                                                    >
                                                        <option [value]="report.id"
                                                                *ngFor="let report of reportIdList; let i = index;"
                                                        >
                                                            {{ 'Report ' + (i + 1) }}
                                                        </option>
                                                    </select>
                                                </span>
                                            </td>
                                            <td colspan="4"><span>Attendance</span></td>
                                            <td class="blank"><span></span></td>
                                            <td colspan="6"><span>Monetary</span></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                            <!-- First section start -->
                            <tr *ngIf="progress_report.crucial_date != undefined && displaymode">
                                <td colspan="14">
                                    <table class="table no-margin">
                                        <tbody>
                                        <tr class="sky-blue disabled_input">
                                            <td><input value="Date" disabled="disabled"></td>
                                            <td><input value="Day" disabled></td>
                                            <td><input value="Programmes" disabled></td>
                                            <td><input value="Men" disabled></td>
                                            <td><input value="Women" disabled></td>
                                            <td><input value="Children" disabled></td>
                                            <td><input value="Total" disabled></td>
                                            <td style="width: 1.8%">&nbsp;</td>
                                            <td><input value="Offering" disabled></td>
                                            <td colspan="2">
                                                <table class="table no-margin sky-blue">
                                                    <tr>
                                                        <td colspan="2"><input value="Tithe" disabled></td>
                                                    </tr>
                                                    <tr>
                                                        <td style="border: 1px solid #000;border-left: 0;border-bottom: 0;">
                                                            <input value="Pastor" disabled></td>
                                                        <td><input value="General" disabled></td>
                                                    </tr>
                                                </table>

                                            </td>
                                            <td><input value="F/Fruit" disabled></td>
                                            <td><input value="T/Giving" disabled></td>
                                            <td><input value="Total" disabled></td>
                                        </tr>
                                        </tbody>
                                    </table>

                                    <!-- Week Generating Section Start -->
                                    <table class="table no-margin"
                                           *ngFor="let weekly of progress_report.report.weekly; let i = index">
                                        <tbody *ngFor="let week of weekly.days; let j = index">
                                        <tr *ngIf="week.day === 'Sunday'">
                                            <td>
                                                <input type="text"
                                                       [name]="'week' + i + 'date' + j"
                                                       [(ngModel)]="week.date"
                                                       class="form-control bg-pink"
                                                       disabled
                                                >
                                            </td>
                                            <td>
                                                <input type="text"
                                                       [name]="'week' + i + 'day' + j"
                                                       [(ngModel)]="week.day"
                                                       class="form-control"
                                                       disabled
                                                >
                                            </td>
                                            <td>
                                                <input type="text"
                                                       [name]="'week' + i + 'programmes' + j"
                                                       [(ngModel)]="week.programmes"
                                                       class="form-control bg-pink"
                                                >
                                            </td>
                                            <td>
                                                <input type="number"
                                                       [name]="'week' + i + 'men' + j"
                                                       [(ngModel)]="week.attendance.men"
                                                       min="0"
                                                       step="1"
                                                       class="form-control sea-green"
                                                >
                                            </td>
                                            <td>
                                                <input type="number"
                                                       [name]="'week' + i + 'women' + j"
                                                       [(ngModel)]="week.attendance.women"
                                                       min="0"
                                                       step="1"
                                                       class="form-control sea-green"
                                                >
                                            </td>
                                            <td>
                                                <input type="number"
                                                       [name]="'week' + i + 'children' + j"
                                                       [(ngModel)]="week.attendance.children"
                                                       min="0"
                                                       step="1"
                                                       class="form-control sea-green"
                                                >
                                            </td>
                                            <td>
                                                <input type="number"
                                                       [name]="'week' + i + 'a_total' + j"
                                                       [(ngModel)]="week.attendance.total"
                                                       min="0"
                                                       step="1"
                                                       class="form-control"
                                                       disabled
                                                >
                                            </td>
                                            <td class="blank" style="width: 1%">&nbsp;</td>
                                            <td colspan="6">&nbsp;</td>
                                        </tr>
                                        <tr *ngIf="week.day !== 'Sunday'">
                                            <td>
                                                <input type="text"
                                                       [name]="'week' + i + 'date' + j"
                                                       [(ngModel)]="week.date"
                                                       class="form-control bg-pink"
                                                       disabled
                                                >
                                            </td>
                                            <td>
                                                <input type="text"
                                                       [name]="'week' + i + 'day' + j"
                                                       [(ngModel)]="week.day"
                                                       class="form-control"
                                                       disabled
                                                >
                                            </td>
                                            <td>
                                                <input type="text"
                                                       [name]="'week' + i + 'programmes' + j"
                                                       [(ngModel)]="week.programmes"
                                                       class="form-control bg-pink"
                                                >
                                            </td>
                                            <td>
                                                <input type="number"
                                                       [name]="'week' + i + 'men' + j"
                                                       [(ngModel)]="week.attendance.men"
                                                       min="0"
                                                       step="1"
                                                       class="form-control sea-green"
                                                >
                                            </td>
                                            <td>
                                                <input type="number"
                                                       [name]="'week' + i + 'women' + j"
                                                       [(ngModel)]="week.attendance.women"
                                                       min="0"
                                                       step="1"
                                                       class="form-control sea-green"
                                                >
                                            </td>
                                            <td>
                                                <input type="number"
                                                       [name]="'week' + i + 'children' + j"
                                                       [(ngModel)]="week.attendance.children"
                                                       min="0"
                                                       step="1"
                                                       class="form-control sea-green"
                                                >
                                            </td>
                                            <td>
                                                <input type="number"
                                                       [name]="'week' + i + 'a_total' + j"
                                                       [(ngModel)]="week.attendance.total"
                                                       min="0"
                                                       step="1"
                                                       class="form-control"
                                                       disabled
                                                >
                                            </td>
                                            <td class="blank" style="width: 1%">&nbsp;</td>
                                            <td>
                                                <input type="number"
                                                       [name]="'week' + i + 'offering' + j"
                                                       [(ngModel)]="week.monetary.offering"
                                                       min="0"
                                                       step="0.01"
                                                       class="form-control sea-green"
                                                >
                                            </td>
                                            <td>
                                                <input type="number"
                                                       [name]="'week' + i + 'pastor' + j"
                                                       [(ngModel)]="week.monetary.tithe.pastor"
                                                       min="0"
                                                       step="0.01"
                                                       class="form-control sea-green"
                                                >
                                            </td>
                                            <td>
                                                <input type="number"
                                                       [name]="'week' + i + 'general' + j"
                                                       [(ngModel)]="week.monetary.tithe.general"
                                                       min="0"
                                                       step="0.01"
                                                       class="form-control sea-green"
                                                >
                                            </td>
                                            <td>
                                                <input type="number"
                                                       [name]="'week' + i + 'f_fruit' + j"
                                                       [(ngModel)]="week.monetary.f_fruit"
                                                       min="0"
                                                       step="0.01"
                                                       class="form-control sea-green"
                                                >
                                            </td>
                                            <td>
                                                <input type="number"
                                                       [name]="'week' + i + 't_giving' + j"
                                                       [(ngModel)]="week.monetary.t_giving"
                                                       min="0"
                                                       step="0.01"
                                                       class="form-control sea-green"
                                                >
                                            </td>
                                            <td>
                                                <input type="number"
                                                       [name]="'week' + i + 'm_total' + j"
                                                       [(ngModel)]="week.monetary.total"
                                                       min="0"
                                                       step="0.01"
                                                       class="form-control"
                                                       disabled
                                                >
                                            </td>
                                        </tr>
                                        </tbody>
                                        <tbody>
                                        <tr>
                                            <td class="blank" colspan="6">&nbsp;</td>
                                            <td colspan="2">
                                                <strong>Weekly Total</strong>
                                            </td>
                                            <td>
                                                <b>
                                                    <input type="number"
                                                           [name]="'weekly_total' + i + 'offering'"
                                                           [(ngModel)]="progress_report.report.weekly[i].weekly_total.monetary.offering"
                                                           min="0"
                                                           step="1"
                                                           class="form-control"
                                                           disabled
                                                    >
                                                </b>
                                            </td>
                                            <td>
                                                <input type="number"
                                                       [name]="'weekly_total' + i + 'pastor'"
                                                       [(ngModel)]="progress_report.report.weekly[i].weekly_total.monetary.tithe.pastor"
                                                       min="0"
                                                       step="1"
                                                       class="form-control"
                                                       disabled
                                                >
                                            </td>
                                            <td>
                                                <b>
                                                    <input type="number"
                                                           [name]="'weekly_total' + i + 'general'"
                                                           [(ngModel)]="progress_report.report.weekly[i].weekly_total.monetary.tithe.general"
                                                           min="0"
                                                           step="1"
                                                           class="form-control"
                                                           disabled
                                                    >
                                                </b>
                                            </td>
                                            <td>
                                                <input type="number"
                                                       [name]="'weekly_total' + i + 'f_fruit'"
                                                       [(ngModel)]="progress_report.report.weekly[i].weekly_total.monetary.f_fruit"
                                                       min="0"
                                                       step="1"
                                                       class="form-control"
                                                       disabled
                                                >
                                            </td>
                                            <td>
                                                <b>
                                                    <input type="number"
                                                           [name]="'weekly_total' + i + 't_giving'"
                                                           [(ngModel)]="progress_report.report.weekly[i].weekly_total.monetary.t_giving"
                                                           min="0"
                                                           step="1"
                                                           class="form-control"
                                                           disabled
                                                    >
                                                </b>
                                            </td>
                                            <td>
                                                <b>
                                                    <input type="number"
                                                           [name]="'weekly_total' + i + 'total'"
                                                           [(ngModel)]="progress_report.report.weekly[i].weekly_total.monetary.total"
                                                           min="0"
                                                           step="1"
                                                           class="form-control"
                                                           disabled
                                                    >
                                                </b>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    <!-- Week Generating Section End -->

                                </td>
                            </tr>
                            <!-- First section end -->

                            <!-- Last section start -->
                            <tr *ngIf="progress_report.crucial_date != undefined && displaymode">
                                <td colspan="14">
                                    <table class="table" style="margin-bottom: 0;">
                                        <tbody>
                                        <tr>
                                            <td colspan="6">
                                                <p>Monthly Average Attendance(MAA)</p>
                                            </td>
                                            <td colspan="2">
                                                <strong>Monthly Total</strong>
                                            </td>
                                            <td>
                                                <b>
                                                    <input type="number"
                                                           [name]="'monthly_total' +  'offering'"
                                                           [(ngModel)]="progress_report.report.monthly_total.monetary.offering"
                                                           min="0"
                                                           step="1"
                                                           class="form-control"
                                                           disabled
                                                    >
                                                </b>
                                            </td>
                                            <td>
                                                <b>
                                                    <input type="number"
                                                           [name]="'monthly_total' +  'pastor'"
                                                           [(ngModel)]="progress_report.report.monthly_total.monetary.tithe.pastor"
                                                           min="0"
                                                           step="1"
                                                           class="form-control"
                                                           disabled
                                                    >
                                                </b>
                                            </td>
                                            <td>
                                                <b>
                                                    <input type="number"
                                                           [name]="'monthly_total' +  'general'"
                                                           [(ngModel)]="progress_report.report.monthly_total.monetary.tithe.general"
                                                           min="0"
                                                           step="1"
                                                           class="form-control"
                                                           disabled
                                                    >
                                                </b>
                                            </td>
                                            <td>
                                                <input type="number"
                                                       [name]="'monthly_total' +  'f_fruit'"
                                                       [(ngModel)]="progress_report.report.monthly_total.monetary.f_fruit"
                                                       min="0"
                                                       step="1"
                                                       class="form-control"
                                                       disabled
                                                >
                                            </td>
                                            <td>
                                                <b>
                                                    <input type="number"
                                                           [name]="'monthly_total' +  't_giving'"
                                                           [(ngModel)]="progress_report.report.monthly_total.monetary.t_giving"
                                                           min="0"
                                                           step="1"
                                                           class="form-control"
                                                           disabled
                                                    >
                                                </b>
                                            </td>
                                            <td>
                                                <b>
                                                    <input type="number"
                                                           [name]="'monthly_total' +  'm_total'"
                                                           [(ngModel)]="progress_report.report.monthly_total.monetary.total"
                                                           min="0"
                                                           step="1"
                                                           class="form-control"
                                                           disabled
                                                    >
                                                </b>
                                            </td>
                                        </tr>
                                        </tbody>
                                        <tbody>
                                        <tr>
                                            <td colspan="2"><span>Services</span></td>
                                            <td><span>Children</span></td>
                                            <td><span>Women</span></td>
                                            <td><span>Men</span></td>
                                            <td><span>Total</span></td>
                                            <td colspan="4">
                                                <strong>Parish Start Date: <span class="date">{{ progress_report.parish_start_date }}</span></strong>
                                            </td>
                                            <td><span>Area Contrib.</span></td>
                                            <td>
                                                <b><input type="text" class="form-control highlight" value="{{ progress_report.area_dues }}" disabled></b>
                                            </td>
                                            <td><span>WEM</span></td>
                                            <td>
                                                <b>

                                                    <input type="number"
                                                           [name]="'monthly_total' +  'wemshare'"
                                                           [(ngModel)]="progress_report.wem_share"
                                                           min="0"
                                                           step="1"
                                                           class="form-control"
                                                           disabled
                                                    >
                                                </b>
                                            </td>
                                        </tr>
                                        </tbody>
                                        <tbody>
                                        <tr>
                                            <td colspan="2"><span>Sunday School</span></td>
                                            <td class="highlight-light">
                                                <input type="text" class="form-control highlight-light" value="{{ child_sunday }}" disabled>
                                            </td>
                                            <td class="highlight-light">
                                                <input type="text" class="form-control highlight-light" value="{{ women_sunday }}" disabled>
                                            </td>
                                            <td class="highlight-light">
                                                <input type="text" class="form-control highlight-light" value="{{ men_sunday }}" disabled>
                                            </td>
                                            <td class="highlight-light">
                                                <b><input type="text" class="form-control highlight-light"
                                                          value="{{ child_sunday + women_sunday + men_sunday }}" disabled></b>
                                            </td>
                                            <td colspan="2">
                                                <strong>Adults only: </strong>
                                            </td>
                                            <td colspan="2" class="highlight">
                                                <strong><span class="highlight maa">MAA(Adults Only)</span></strong>
                                            </td>
                                            <td colspan="4"><span>Projected Parish Numerical Strength</span></td>
                                        </tr>
                                        </tbody>
                                        <tbody>
                                        <tr>
                                            <td colspan="2"><span>Sunday</span></td>
                                            <td class="highlight-light">
                                                <input type="text" class="form-control highlight-light" value="{{ child_sunday_service }}" disabled>
                                            </td>
                                            <td class="highlight-light">
                                                <input type="text" class="form-control highlight-light" value="{{ women_sunday_service }}" disabled>
                                            </td>
                                            <td class="highlight-light">
                                                <input type="text" class="form-control highlight-light" value="{{ men_sunday_service }}" disabled>
                                            </td>
                                            <td class="highlight-light">
                                                <b><input type="text" class="form-control highlight-light" value="{{ child_sunday_service + women_sunday_service + men_sunday_service }}" disabled></b>
                                            </td>
                                            <td>
                                                <span>Sunday</span>
                                            </td>
                                            <td class="highlight-light">
                                                <input type="text" class="form-control highlight-light" value="{{ men_sunday_service + women_sunday_service }}" disabled>
                                            </td>
                                            <td colspan="2" style="border-bottom: 0;">
                                                <input type="text" class="form-control" value="" disabled>
                                            </td>
                                            <td colspan="4" style="border-bottom: 0;">
                                                <input type="text" class="form-control" value="" disabled>
                                            </td>
                                        </tr>
                                        </tbody>
                                        <tbody>
                                        <tr>
                                            <td colspan="2"><span>Mid Week</span></td>
                                            <td class="highlight-light">
                                                <input type="text" class="form-control highlight-light" value="{{ midWeek_child }}" disabled>
                                            </td>
                                            <td class="highlight-light">
                                                <input type="text" class="form-control highlight-light" value="{{ midWeek_women }}" disabled>
                                            </td>
                                            <td class="highlight-light">
                                                <input type="text" class="form-control highlight-light" value="{{ midWeek_men }}" disabled>
                                            </td>
                                            <td class="highlight-light">
                                                <b><input type="text" class="form-control highlight-light"
                                                          value="{{ midWeek_child + midWeek_men + midWeek_women }}" disabled></b>
                                            </td>
                                            <td>
                                                <span>Mid Week</span>
                                            </td>
                                            <td class="highlight-light">
                                                <input type="text" class="form-control highlight-light" value="{{ midWeek_men + midWeek_women }}" disabled>
                                            </td>
                                            <td colspan="2" style="border-top: 0;" class="highlight">
                                                <b><input type="text" class="form-control highlight" value="{{ midWeek_men + midWeek_women + men_sunday_service + women_sunday_service }}" disabled></b>
                                            </td>
                                            <td colspan="4" style="border-top: 0;">
                                                <b><input type="text" class="form-control" value="{{ (midWeek_men + midWeek_women + men_sunday_service + women_sunday_service) +((midWeek_men + midWeek_women + men_sunday_service + women_sunday_service )*.02)}}" disabled></b>
                                            </td>
                                        </tr>
                                        </tbody>
                                        <tbody>
                                        <tr>
                                            <td colspan="2" class="monthly-growth"><span>Monthly Growth</span></td>
                                            <td><span>Number of Births</span></td>
                                            <td class="sea-green">
                                                <b class="sea-green"><input type="text" class="form-control sea-green"
                                                                            value="{{ progress_report.no_of_birth }}" [(ngModel)]="progress_report.no_of_birth" name="no_of_birth"></b>
                                            </td>
                                            <td><span>Number of Deaths</span></td>
                                            <td class="sea-green">
                                                <b class="sea-green"><input type="text" class="form-control sea-green"
                                                                            value="{{ progress_report.no_of_death }}" [(ngModel)]="progress_report.no_of_death" name="no_of_death"></b>
                                            </td>
                                            <td colspan="2"><span>Number of Marriages</span></td>
                                            <td class="sea-green">
                                                <b class="sea-green"><input type="text" class="form-control sea-green"
                                                                            value="{{ progress_report.no_of_marrg }}" [(ngModel)]="progress_report.no_of_marrg" name="no_of_marrg"></b>
                                            </td>
                                            <td><span>Number of Souls Saved</span></td>
                                            <td class="sea-green">
                                                <b class="sea-green"><input type="text" class="form-control sea-green"
                                                                            value="{{ progress_report.no_of_souls_saved }}" [(ngModel)]="progress_report.no_of_souls_saved" name="no_of_souls_saved"></b>
                                            </td>
                                            <td colspan="2"><span>Number of New Workers</span></td>
                                            <td class="sea-green">
                                                <b class="sea-green"><input type="text" class="form-control sea-green" name ="no_of_new_workers" [(ngModel)]="progress_report.no_of_new_workers"
                                                                            value="{{ progress_report.no_of_new_workers }}"></b>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                            <!-- Last section end -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <button class="btn btn-primary form-control"
                *ngIf="progress_report.crucial_date != undefined && !viewMode"
                (click)="onSubmit('save')">
            Submit
        </button>
    </div>
    <div class="col-md-6">
        <button class="btn btn-primary form-control"
                *ngIf="progress_report.crucial_date != undefined && !viewMode"
                (click)="onSubmit('draft')">
            Draft
        </button>
    </div>
</form>


<app-prompt
        *ngIf="payment_upload"
        [calledFrom]="'viewUploadPayment'"
></app-prompt>
